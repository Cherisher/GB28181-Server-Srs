webpackJsonp([12],{CAPF:function(t,e,s){var a=s("WqtL");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("FIqI")("02fe2cd2",a,!0,{})},GWiT:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},i=s("HVJf"),n=s("6ROu"),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){return{timer:0,requestkey:"",activationCode:"",activationCodeSMS:"",bSubmitting:!1,bSubmittingSMS:!1,runningTime:"",runningSMSTime:"",smsserial:"",smss:[],sms:{},smsrequestkey:{},smsserverinfo:{},expanded:!1}},computed:a({},(0,i.mapState)(["userInfo","serverInfo"]),{actived:function(){return 9999==this.serverInfo.RemainDays},activedsms:function(){return 9999==this.smsserverinfo.RemainDays},canExpand:function(){return!!(this.actived&&this.serverInfo.VersionType&&this.serverInfo.VersionType.indexOf("旗舰版")<0)||!!(this.actived&&this.serverInfo.ChannelCount&&this.serverInfo.ChannelCount>=0&&1e3!=this.serverInfo.ChannelCount)}}),mounted:function(){var e=this;this.timer=setInterval(function(){if(e.serverInfo&&e.serverInfo.StartUpTime){var t=(0,r.default)(e.serverInfo.StartUpTime,"YYYY-MM-DD HH:mm:ss"),s=(0,r.default)(),a=r.default.duration(s.diff(t));e.serverInfo.DiffDuration&&(a=a.add(e.serverInfo.DiffDuration)),e.runningTime=parseInt(a.asDays())+" Days "+a.hours()+" Hours "+a.minutes()+" Mins "+a.seconds()+" Secs"}if(e.smsserverinfo&&e.smsserverinfo.StartUpTime){var t=(0,r.default)(e.smsserverinfo.StartUpTime,"YYYY-MM-DD HH:mm:ss"),s=(0,r.default)(),a=r.default.duration(s.diff(t));e.smsserverinfo.DiffDuration&&(a=a.add(e.smsserverinfo.DiffDuration)),e.runningSMSTime=parseInt(a.asDays())+" Days "+a.hours()+" Hours "+a.minutes()+" Mins "+a.seconds()+" Secs"}},1e3),t.get("/api/v1/getrequestkey").then(function(t){e.requestkey=t.RequestKey}),this.getSMSList()},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},methods:a({},(0,i.mapActions)(["getServerInfo"]),{restart:function(){var e=this;this.$confirm("此操作将重启信令服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.get("/api/v1/restart").then(function(t){e.$message({type:"success",message:"重启成功!"}),setTimeout(function(){e.getServerInfo()},2e3)}).fail(function(){e.$message({type:"error",message:"重启失败!"})})}).catch(function(){})},restartSMS:function(){var e=this;this.$confirm("此操作将重启流媒体服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.get("/api/v1/sms/restart",{serial:e.smsserial}).then(function(t){e.$message({type:"success",message:"重启成功!"}),setTimeout(function(){e.getSMSInfo()},2e3)}).fail(function(){e.$message({type:"error",message:"重启失败!"})})}).catch(function(){})},checkCode:function(){var e=this;""==this.activationCode?this.$message({type:"error",message:"请输入激活码"}):(this.bSubmitting=!0,t.get("/api/v1/verifyproductcode",{productcode:this.activationCode}).then(function(t){1==t.State?(e.$message({type:"success",message:"授权成功！"}),e.getServerInfo()):e.$message({type:"error",message:"输入有效激活码"})}).always(function(){e.bSubmitting=!1}))},getSMSList:function(){var e=this;""==this.smsserial&&t.get("/api/v1/sms/list").then(function(t){e.smss=t,t.length>0&&(e.sms=t[0],e.smsserial=t[0].Serial),e.getSMSInfo()})},getSMSInfo:function(){var e=this;""!=this.smsserial&&(t.get("/api/v1/sms/getrequestkey",{serial:this.smsserial}).then(function(t){e.smsrequestkey=t}),t.get("/api/v1/sms/getserverinfo",{serial:this.smsserial}).then(function(t){e.smsserverinfo=t}))},smschange:function(){var e=this;this.getSMSInfo(),t.get("/api/v1/sms/list").then(function(t){e.smss=t;for(var s=0;s<e.smss.length;s++)if(e.smss[s].Serial==e.smsserial){e.sms=e.smss[s];break}})},checkCodeSMS:function(){var e=this;""==this.activationCodeSMS?this.$message({type:"error",message:"请输入激活码"}):(this.bSubmittingSMS=!0,t.get("/api/v1/sms/verifyproductcode",{serial:this.smsserial,productcode:this.activationCodeSMS}).then(function(t){1==t.State?(e.$message({type:"success",message:"授权成功！"}),e.getSMSInfo()):e.$message({type:"error",message:"输入有效激活码"})}).always(function(){e.bSubmittingSMS=!1}))},expand:function(){this.expanded=!0}})}}).call(e,s("0iPh"))},WqtL:function(t,e,s){e=t.exports=s("UTlt")(!1),e.push([t.i,".container-fluid.no-padding.box-cards[data-v-2d5731c4]{overflow:hidden}.container-fluid.no-padding.box-cards .box-card[class*=col-][data-v-2d5731c4]{margin-bottom:-99999px;padding-bottom:99999px}",""])},sZXX:function(t,e,s){"use strict";function a(t){s("CAPF")}Object.defineProperty(e,"__esModule",{value:!0});var i=s("GWiT"),n=s.n(i);for(var r in i)["default","default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return i[t]})}(r);var o=s("tAbA"),v=s("C7Lr"),d=a,c=v(n.a,o.a,!1,d,"data-v-2d5731c4",null);e.default=c.exports},tAbA:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid no-padding box-cards"},[s("el-card",{staticClass:"box-card col-lg-6",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"col-md-12 no-padding"},[s("h3",[t._v("信令服务")])])]),t._v(" "),s("div",{staticClass:"server-info"},[s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-support"}),t._v(" 版本信息")])]),t._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("硬件信息")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.serverInfo.Hardware))])])]),t._v(" "),s("tr",[s("td",[t._v("接口版本")]),t._v(" "),s("td",[s("span",{attrs:{id:"interface-info"}},[t._v(t._s(t.serverInfo.InterfaceVersion))])])]),t._v(" "),s("tr",[s("td",[t._v("运行时间")]),t._v(" "),s("td",[s("span",{attrs:{id:"running-time-info"}},[t._v(t._s(t.runningTime||t.serverInfo.RunningTime)+"\r\n                                        "),t.userInfo?s("small",[t._v("\r\n                                             "),s("a",{staticClass:"text-orange",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.restart(e)}}},[t._v("重启")])]):t._e()])])]),t._v(" "),s("tr",[s("td",[t._v("软件信息")]),t._v(" "),s("td",[s("span",{attrs:{id:"software-info"}},[t._v(t._s(t.serverInfo.Server))])])])])])])]),t._v(" "),s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-key"}),t._v(" 授权信息 "),t.serverInfo.VersionType?s("span",[t._v("("+t._s(t.serverInfo.VersionType)+")")]):t._e(),t._v("\r\n                          \r\n                        "),s("small",{directives:[{name:"show",rawName:"v-show",value:t.canExpand&&!t.expanded,expression:"canExpand && !expanded"}]},[s("a",{staticClass:"fa fa-plus",staticStyle:{color:"#afa9a9"},attrs:{href:"#",title:"显示激活码入口"},on:{click:function(e){e.preventDefault(),t.expand(e)}}})])])]),t._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("授权对象")]),t._v(" "),s("td",[t._v(t._s(t.serverInfo.Authorization))])]),t._v(" "),s("tr",[s("td",[t._v("授权时间")]),t._v(" "),t.actived?s("td",[t._v("永久授权")]):s("td",[t._v("剩余期限"+t._s(t.serverInfo.RemainDays)+"天")])]),t._v(" "),t.actived&&t.serverInfo.ChannelCount&&t.serverInfo.ChannelCount>=0&&1e3!=t.serverInfo.ChannelCount?s("tr",[s("td",[t._v("通道数")]),t._v(" "),s("td",[t._v(t._s(t.serverInfo.ChannelCount))])]):t._e(),t._v(" "),!t.actived||t.expanded?s("tr",[s("td",[t._v("机器码")]),t._v(" "),s("td",[s("span",{attrs:{id:"key-info"}},[t._v("CMS"+t._s((t.serverInfo.Server||"").indexOf("Linux")>=0?"L":"W")+t._s(t.requestkey))]),t._v(" "),s("br"),t._v(" "),s("span",{staticStyle:{color:"#bbb"}},[t._v("(通过邮箱：support@liveqing.com 向商务人员咨询永久授权信息)")])])]):t._e(),t._v(" "),!t.actived||t.expanded?s("tr",[s("td",[t._v("提交激活码")]),t._v(" "),s("td",[s("el-input",{ref:"activationCode",staticStyle:{"margin-bottom":"10px"},attrs:{type:"textarea",rows:1,placeholder:"输入申请到的激活码",autosize:{minRows:1,maxRows:5}},model:{value:t.activationCode,callback:function(e){t.activationCode="string"==typeof e?e.trim():e},expression:"activationCode"}}),t._v(" "),s("div",[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:t.bSubmitting},on:{click:function(e){e.preventDefault(),t.checkCode(e)}}},[t._v(" 提交 ")])])],1)]):t._e()])])])])])]),t._v(" "),s("el-card",{staticClass:"box-card col-lg-6",attrs:{shadow:"never"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"col-md-6 no-padding"},[s("h3",[t._v("流媒体服务")])]),t._v(" "),t.sms.Load?s("div",{staticClass:"col-md-6 no-padding"},[s("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.smsserial,expression:"smsserial",modifiers:{trim:!0}}],staticStyle:{"margin-top":"23px",width:"100%"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.smsserial=e.target.multiple?s:s[0]},t.smschange]}},t._l(t.smss,function(e,a){return s("option",{key:a,domProps:{value:e.Serial}},[t._v(" SMS-"+t._s(e.Serial))])}))]):t._e()]),t._v(" "),s("div",{staticClass:"server-info"},[t.smsserverinfo.Hardware?t._e():s("h4",{staticStyle:{"text-align":"center"}},[t._v(" SMS 流媒体服务尚未启动 ")]),t._v(" "),t.smsserverinfo.Hardware?s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-support"}),t._v(" 版本信息")])]),t._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("硬件信息")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.smsserverinfo.Hardware))])])]),t._v(" "),s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("负载")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.sms.Load))])])]),t._v(" "),t.sms.HWDecodeLoad?s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("硬解负载")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.sms.HWDecodeLoad))])])]):t._e(),t._v(" "),t.sms.HWEncodeLoad?s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("硬编负载")]),t._v(" "),s("td",[s("span",[t._v(t._s(t.sms.HWEncodeLoad))])])]):t._e(),t._v(" "),s("tr",[s("td",[t._v("运行时间")]),t._v(" "),s("td",[s("span",{attrs:{id:"running-time-info"}},[t._v(t._s(t.runningSMSTime||t.smsserverinfo.RunningTime)+"\r\n                                        "),t.userInfo?s("small",[t._v("\r\n                                             "),s("a",{staticClass:"text-orange",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.restartSMS(e)}}},[t._v("重启")])]):t._e()])])]),t._v(" "),s("tr",[s("td",[t._v("软件信息")]),t._v(" "),s("td",[s("span",{attrs:{id:"software-info"}},[t._v(t._s(t.smsserverinfo.Server))])])])])])])]):t._e(),t._v(" "),t.smsrequestkey.RequestKey&&t.smsserverinfo.Authorization?s("div",{staticClass:"box box-widget"},[s("div",{staticClass:"box-header"},[s("h4",[s("i",{staticClass:"fa fa-key"}),t._v(" 授权信息 "),t.smsserverinfo.VersionType?s("span",[t._v("("+t._s(t.smsserverinfo.VersionType)+")")]):t._e()])]),t._v(" "),s("div",{staticClass:"box-body table-responsive no-padding"},[s("table",{staticClass:"table table-striped"},[s("tbody",[s("tr",[s("td",{staticStyle:{width:"20%"}},[t._v("授权对象")]),t._v(" "),s("td",[t._v(t._s(t.smsserverinfo.Authorization))])]),t._v(" "),s("tr",[s("td",[t._v("授权时间")]),t._v(" "),t.activedsms?s("td",[t._v("永久授权")]):s("td",[t._v("剩余期限"+t._s(t.smsserverinfo.RemainDays)+"天")])]),t._v(" "),(t.activedsms||t.expanded)&&t.smsserverinfo.ChannelCount&&t.smsserverinfo.ChannelCount>=0&&1e3!=t.smsserverinfo.ChannelCount?s("tr",[s("td",[t._v("通道数")]),t._v(" "),s("td",[t._v(t._s(t.smsserverinfo.ChannelCount))])]):t._e(),t._v(" "),!t.activedsms||t.expanded?s("tr",[s("td",[t._v("机器码")]),t._v(" "),s("td",[s("span",{attrs:{id:"key-info"}},[t._v("SMS"+t._s((t.smsserverinfo.Server||"").indexOf("Linux")>=0?"L":"W")+t._s(t.smsrequestkey.RequestKey))]),t._v(" "),s("br"),t._v(" "),s("span",{staticStyle:{color:"#bbb"}},[t._v("(通过邮箱：support@liveqing.com 向商务人员咨询永久授权信息)")])])]):t._e(),t._v(" "),!t.activedsms||t.expanded?s("tr",[s("td",[t._v("提交激活码")]),t._v(" "),s("td",[s("el-input",{ref:"activationCodeSMS",staticStyle:{"margin-bottom":"10px"},attrs:{type:"textarea",rows:1,placeholder:"输入申请到的激活码",autosize:{minRows:1,maxRows:5}},model:{value:t.activationCodeSMS,callback:function(e){t.activationCodeSMS="string"==typeof e?e.trim():e},expression:"activationCodeSMS"}}),t._v(" "),s("div",[s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:t.bSubmittingSMS},on:{click:function(e){e.preventDefault(),t.checkCodeSMS(e)}}},[t._v(" 提交 ")])])],1)]):t._e()])])])]):t._e()])])],1)},i=[],n={render:a,staticRenderFns:i};e.a=n}});